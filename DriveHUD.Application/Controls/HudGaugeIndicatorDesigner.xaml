<UserControl
    x:Class="DriveHUD.Application.Controls.HudGaugeIndicatorDesigner"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:DriveHUD.Application.Controls"
    mc:Ignorable="d"
    xmlns:dh="http://www.acepokersolutions.com/winfx/2015/xaml/presentation"
    xmlns:app="clr-namespace:DriveHUD.Application"
    Width="{Binding Width}"
    Height="{Binding Height}"
    d:DesignHeight="154"
    d:DesignWidth="992">

    <UserControl.Resources>

        <Style
            x:Key="HudToolTipHeadTextBoxStyle"
            BasedOn="{StaticResource {x:Type TextBox}}"
            TargetType="{x:Type TextBox}">
            <Setter
                Property="Foreground"
                Value="#FF606060" />
            <Setter
                Property="FontSize"
                Value="14" />
            <Setter
                Property="Margin"
                Value="0,10" />
            <Setter
                Property="FontFamily"
                Value="Segoe UI" />
            <Setter
                Property="FontWeight"
                Value="Bold" />
            <Setter
                Property="BorderThickness"
                Value="0" />
        </Style>

        <Style
            x:Key="HudToolTipTextBlockStyle"
            BasedOn="{StaticResource Title_H2}"
            TargetType="{x:Type TextBlock}">
            <Setter
                Property="FontWeight"
                Value="Bold" />
        </Style>

        <Style
            x:Key="MeterBorderStyle"
            TargetType="{x:Type Border}">
            <Setter
                Property="Width"
                Value="12" />
            <Setter
                Property="Height"
                Value="6" />
            <Setter
                Property="BorderThickness"
                Value="0,1,0,0" />
            <Setter
                Property="VerticalAlignment"
                Value="Top" />
            <Setter
                Property="Margin"
                Value="1,0,0,0" />
            <Setter
                Property="Background"
                Value="#3e3e3e" />
            <Setter
                Property="BorderBrush"
                Value="#595959" />
        </Style>

        <ItemsPanelTemplate
            x:Key="ToolTipItemsPanelTemplate">
            <StackPanel
                Orientation="Vertical"
                IsItemsHost="True" />
        </ItemsPanelTemplate>

        <Style
            x:Key="MeterControlStyle"
            TargetType="{x:Type ContentControl}">
            <Setter
                Property="Template">
                <Setter.Value>
                    <ControlTemplate>
                        <StackPanel
                            Orientation="Horizontal"
                            VerticalAlignment="Center"
                            Margin="3">

                            <!-- Block 1 -->
                            <Border
                                Style="{StaticResource MeterBorderStyle}"
                                Background="{Binding StatInfoMeter.BackgroundBrush[0]}"
                                BorderBrush="{Binding StatInfoMeter.BorderBrush[0]}"
                                Visibility="{Binding CurrentValue, Converter={dh:TrackConditionsScoreToVisibilityConverter Divider=10, HiddenVisibility=Hidden}, ConverterParameter=1}"
                                CornerRadius="1,0,0,1" />

                            <!-- Block 2 -->
                            <Border
                                Style="{StaticResource MeterBorderStyle}"
                                Background="{Binding StatInfoMeter.BackgroundBrush[1]}"
                                BorderBrush="{Binding StatInfoMeter.BorderBrush[1]}"
                                Visibility="{Binding CurrentValue, Converter={dh:TrackConditionsScoreToVisibilityConverter Divider=10, HiddenVisibility=Hidden}, ConverterParameter=2}" />

                            <!-- Block 3 -->
                            <Border
                                Style="{StaticResource MeterBorderStyle}"
                                Background="{Binding StatInfoMeter.BackgroundBrush[2]}"
                                BorderBrush="{Binding StatInfoMeter.BorderBrush[2]}"
                                Visibility="{Binding CurrentValue, Converter={dh:TrackConditionsScoreToVisibilityConverter Divider=10, HiddenVisibility=Hidden}, ConverterParameter=3}" />

                            <!-- Block 4 -->
                            <Border
                                Style="{StaticResource MeterBorderStyle}"
                                Background="{Binding StatInfoMeter.BackgroundBrush[3]}"
                                BorderBrush="{Binding StatInfoMeter.BorderBrush[3]}"
                                Visibility="{Binding CurrentValue, Converter={dh:TrackConditionsScoreToVisibilityConverter Divider=10, HiddenVisibility=Hidden}, ConverterParameter=4}" />

                            <!-- Block 5 -->
                            <Border
                                Style="{StaticResource MeterBorderStyle}"
                                Background="{Binding StatInfoMeter.BackgroundBrush[4]}"
                                BorderBrush="{Binding StatInfoMeter.BorderBrush[4]}"
                                Visibility="{Binding CurrentValue, Converter={dh:TrackConditionsScoreToVisibilityConverter Divider=10, HiddenVisibility=Hidden}, ConverterParameter=5}" />

                            <!-- Block 6 -->
                            <Border
                                Style="{StaticResource MeterBorderStyle}"
                                Background="{Binding StatInfoMeter.BackgroundBrush[5]}"
                                BorderBrush="{Binding StatInfoMeter.BorderBrush[5]}"
                                Visibility="{Binding CurrentValue, Converter={dh:TrackConditionsScoreToVisibilityConverter Divider=10, HiddenVisibility=Hidden}, ConverterParameter=6}" />

                            <!-- Block 7 -->
                            <Border
                                Style="{StaticResource MeterBorderStyle}"
                                Background="{Binding StatInfoMeter.BackgroundBrush[6]}"
                                BorderBrush="{Binding StatInfoMeter.BorderBrush[6]}"
                                Visibility="{Binding CurrentValue, Converter={dh:TrackConditionsScoreToVisibilityConverter Divider=10, HiddenVisibility=Hidden}, ConverterParameter=7}" />

                            <!-- Block 8 -->
                            <Border
                                Style="{StaticResource MeterBorderStyle}"
                                Background="{Binding StatInfoMeter.BackgroundBrush[7]}"
                                BorderBrush="{Binding StatInfoMeter.BorderBrush[7]}"
                                Visibility="{Binding CurrentValue, Converter={dh:TrackConditionsScoreToVisibilityConverter Divider=10, HiddenVisibility=Hidden}, ConverterParameter=8}" />

                            <!-- Block 9 -->
                            <Border
                                Style="{StaticResource MeterBorderStyle}"
                                Background="{Binding StatInfoMeter.BackgroundBrush[8]}"
                                BorderBrush="{Binding StatInfoMeter.BorderBrush[8]}"
                                Visibility="{Binding CurrentValue, Converter={dh:TrackConditionsScoreToVisibilityConverter Divider=10, HiddenVisibility=Hidden}, ConverterParameter=9}" />

                            <!-- Block 10 -->
                            <Border
                                Style="{StaticResource MeterBorderStyle}"
                                Background="{Binding StatInfoMeter.BackgroundBrush[9]}"
                                BorderBrush="{Binding StatInfoMeter.BorderBrush[9]}"
                                CornerRadius="0,1,1,0"
                                Visibility="{Binding CurrentValue, Converter={dh:TrackConditionsScoreToVisibilityConverter Divider=10, HiddenVisibility=Hidden}, ConverterParameter=10}" />

                        </StackPanel>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <SolidColorBrush
            x:Key="CloseButtonBackground"
            x:Shared="False"
            Color="#191a1e" />

    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition
                Height="Auto" />
            <RowDefinition
                Height="Auto" />
            <RowDefinition
                Height="Auto" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition
                Width="Auto" />
            <ColumnDefinition
                Width="Auto" />
        </Grid.ColumnDefinitions>

        <Border
            Grid.Row="0"
            Padding="5 2"
            HorizontalAlignment="Right"
            Background="{StaticResource BackgroundBrush1}">
            <TextBlock
                HorizontalAlignment="Right"
                Text="{Binding BaseStat.ToolTip}"
                Style="{StaticResource HudToolTipTextBlockStyle}" />
        </Border>

        <Grid
            Grid.Row="1"
            Background="{StaticResource BackgroundBrush1}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition
                    Width="Auto" />
                <ColumnDefinition
                    Width="Auto" />
            </Grid.ColumnDefinitions>

            <Border
                Grid.Column="0"
                BorderBrush="{StaticResource ForegroundBrush}"
                BorderThickness="0,0,1,0"
                Padding="3 0 5 0"
                Margin="3 0">
                <TextBox
                    VerticalAlignment="Center"
                    HorizontalAlignment="Left"
                    Style="{StaticResource HudToolTipHeadTextBoxStyle}"
                    Text="{Binding Text}">
                    <TextBox.LayoutTransform>
                        <RotateTransform
                            Angle="270" />
                    </TextBox.LayoutTransform>
                </TextBox>
            </Border>

            <Grid
                Grid.Column="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition
                        Width="Auto" />
                    <ColumnDefinition
                        Width="Auto" />
                    <ColumnDefinition
                        Width="Auto" />
                </Grid.ColumnDefinitions>


                <!-- Use separate items controls in order to properly size columns -->
                <ItemsControl
                    Grid.Column="0"
                    ItemsSource="{Binding Stats}"
                    ItemsPanel="{StaticResource ToolTipItemsPanelTemplate}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <TextBlock
                                Style="{StaticResource HudToolTipTextBlockStyle}"
                                Foreground="White"
                                Height="16"
                                VerticalAlignment="Center"
                                Margin="3"
                                Text="{Binding ToolTip}" />
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>

                <ItemsControl
                    Grid.Column="1"
                    ItemsSource="{Binding Stats}"
                    ItemsPanel="{StaticResource ToolTipItemsPanelTemplate}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <ContentControl
                                Margin="3"
                                Style="{StaticResource MeterControlStyle}"
                                Height="16"
                                VerticalAlignment="Center" />
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>

                <ItemsControl
                    Grid.Column="2"
                    ItemsSource="{Binding Stats}"
                    ItemsPanel="{StaticResource ToolTipItemsPanelTemplate}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <TextBlock
                                Style="{StaticResource HudToolTipTextBlockStyle}"
                                Margin="3"
                                Height="16"
                                VerticalAlignment="Center"
                                Text="{Binding CurrentValue, StringFormat={}{0:0}%}" />
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>

            </Grid>

        </Grid>

        <StackPanel
            Grid.Row="2"
            Grid.Column="0"
            VerticalAlignment="Top"
            HorizontalAlignment="Right"
            Orientation="Horizontal">

            <Button
                Width="11"
                Height="11"
                Padding="0"
                Background="{StaticResource CloseButtonBackground}"
                Command="{Binding SaveCommand}">

                <Path
                    SnapsToDevicePixels="True"
                    Width="8"
                    Height="8"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Stretch="Fill"
                    Fill="#628630"
                    Data="F1M17.414,5.414C17.414,5.414 15.414,7.414 15.414,7.414 15.414,7.414 9.414,13.414 9.414,13.414 9.052,13.775 8.552,13.999 8,13.999 7.447,13.999 6.947,13.775 6.585,13.414 6.585,13.414 2.585,9.414 2.585,9.414 2.224,9.052 2,8.552 2,7.999 2,6.895 2.895,5.999 4,5.999 4.552,5.999 5.052,6.223 5.414,6.585 5.414,6.585 8,9.171 8,9.171 8,9.171 12.586,4.585 12.586,4.585 12.586,4.585 14.585,2.585 14.585,2.585 14.947,2.223 15.447,1.999 16,1.999 17.104,1.999 18,2.895 18,3.999 18,4.552 17.776,5.052 17.414,5.414z" />

            </Button>

            <Button
                Width="11"
                Height="11"
                Margin="2,0,0,0"
                Padding="0"
                Background="{StaticResource CloseButtonBackground}"
                Command="{Binding DataContext.RemoveToolCommand, RelativeSource={RelativeSource AncestorType={x:Type UserControl}, AncestorLevel=2}}"
                CommandParameter="{Binding}">

                <Path
                    SnapsToDevicePixels="True"
                    Width="8"
                    Height="8"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Stretch="Fill"
                    Fill="#b81d1d"
                    Data="F1 M 26.9166,22.1667L 37.9999,33.25L 49.0832,22.1668L 53.8332,26.9168L 42.7499,38L 53.8332,49.0834L 49.0833,53.8334L 37.9999,42.75L 26.9166,53.8334L 22.1666,49.0833L 33.25,38L 22.1667,26.9167L 26.9166,22.1667 Z " />

            </Button>

        </StackPanel>

    </Grid>
</UserControl>